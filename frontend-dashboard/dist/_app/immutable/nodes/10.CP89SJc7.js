import{b as os,u as ns}from"../chunks/DaeG8Ll7.js";import"../chunks/DsnmJJEf.js";import"../chunks/BfMTlK6c.js";import{p as ds,aa as Ce,ab as cs,ac as h,x as e,b as ps,a4 as us,O as b,ad as i,ae as a,u as o,af as p,ah as s,a9 as Te,aI as _s}from"../chunks/BCZT5Dbg.js";import{e as hs,s as n}from"../chunks/CLcpye_t.js";import{f as m,a as _,t as ms}from"../chunks/BpGtaleV.js";import{i as ee}from"../chunks/njmLvgol.js";import{e as se,i as ae}from"../chunks/CLhoNAXF.js";import{r as fs}from"../chunks/BCGdHO_y.js";import{s as Me}from"../chunks/zj_wkZCb.js";import{b as bs}from"../chunks/zfcsrDtj.js";import{b as gs}from"../chunks/CIpFx9H4.js";import{p as xs}from"../chunks/D4Caz1gY.js";import{i as ys}from"../chunks/Ck-BG2pa.js";import{p as $s,s as Ds,a as Es}from"../chunks/BboO_tbj.js";import{s as ws}from"../chunks/iSigOcxx.js";import{I as Ss}from"../chunks/BAVLDn9j.js";const te=new Map,As=async({params:u,fetch:g})=>{const{id:f}=u;if(te.has(f))return{shipmentDetails:te.get(f)};const x=await os(f,g);return x&&te.set(f,x),{shipmentDetails:x}},ea=Object.freeze(Object.defineProperty({__proto__:null,load:As},Symbol.toStringTag,{value:"Module"})),Is=()=>{const u=ws;return{page:{subscribe:u.page.subscribe},navigating:{subscribe:u.navigating.subscribe},updated:u.updated}},js={subscribe(u){return Is().page.subscribe(u)}};var ks=m("<option> </option>"),zs=m('<span class="spinner svelte-h1ivo4"></span> Actualizando...',1),Cs=m('<p class="message error-message svelte-h1ivo4"> </p>'),Ts=m('<p class="message success-message svelte-h1ivo4"> </p>'),Ms=m('<li class="svelte-h1ivo4"><span>ID Producto: <span class="code svelte-h1ivo4"> </span></span> <span> </span></li>'),Ns=m('<li class="log-item svelte-h1ivo4"><div class="log-status"><span class="status-pill small svelte-h1ivo4"> </span></div> <div class="log-details svelte-h1ivo4"><span class="log-message svelte-h1ivo4"> </span> <span class="log-timestamp svelte-h1ivo4"> </span></div></li>'),Os=m('<div class="detail-container svelte-h1ivo4"><div class="header svelte-h1ivo4"><h1 class="svelte-h1ivo4">Detalles del Pedido <span class="accent-text svelte-h1ivo4"> </span></h1> <a href="/dashboard/shipments" class="back-link svelte-h1ivo4">← Volver al listado</a></div> <div class="details-grid svelte-h1ivo4"><div class="grid-col svelte-h1ivo4"><div class="info-card svelte-h1ivo4"><h2 class="svelte-h1ivo4">Información General</h2> <div class="info-grid svelte-h1ivo4"><div class="info-item svelte-h1ivo4"><span class="label svelte-h1ivo4">Estado</span> <span class="status-pill svelte-h1ivo4"> </span></div> <div class="info-item svelte-h1ivo4"><span class="label svelte-h1ivo4">Transporte</span> <!></div> <div class="info-item svelte-h1ivo4"><span class="label svelte-h1ivo4">ID de Usuario</span> <span> </span></div> <div class="info-item svelte-h1ivo4"><span class="label svelte-h1ivo4">Transportista</span> <span> </span></div> <div class="info-item full-width svelte-h1ivo4"><span class="label svelte-h1ivo4">Costo del Envío</span> <span> </span></div> <div class="info-item full-width svelte-h1ivo4"><span class="label svelte-h1ivo4">Nº de Seguimiento</span> <span class="code svelte-h1ivo4"> </span></div></div></div> <div class="info-card svelte-h1ivo4"><h2 class="svelte-h1ivo4">Fechas</h2> <div class="info-grid svelte-h1ivo4"><div class="info-item svelte-h1ivo4"><span class="label svelte-h1ivo4">Creación</span> <span> </span></div> <div class="info-item svelte-h1ivo4"><span class="label svelte-h1ivo4">Últ. Actualización</span> <span> </span></div> <div class="info-item full-width svelte-h1ivo4"><span class="label svelte-h1ivo4">Entrega Estimada</span> <span class="accent-text svelte-h1ivo4"> </span></div></div></div> <div class="info-card svelte-h1ivo4"><h2 class="svelte-h1ivo4">Actualizar Estado</h2> <form><div class="form-group svelte-h1ivo4"><label for="status-select">Nuevo Estado</label> <select id="status-select" required class="svelte-h1ivo4"></select></div> <div class="form-group svelte-h1ivo4"><label for="status-message">Mensaje (opcional)</label> <input type="text" id="status-message" placeholder="Ej: En camino al centro de distribución" class="svelte-h1ivo4"/></div> <button type="submit" class="submit-btn svelte-h1ivo4"><!></button> <!> <!></form></div></div> <div class="grid-col svelte-h1ivo4"><div class="info-card svelte-h1ivo4"><h2 class="svelte-h1ivo4">Direcciones</h2> <div class="address-item svelte-h1ivo4"><span class="label svelte-h1ivo4">Origen</span> <p class="svelte-h1ivo4"> </p> <p class="muted-text svelte-h1ivo4"> </p></div> <div class="address-item svelte-h1ivo4"><span class="label svelte-h1ivo4">Destino</span> <p class="svelte-h1ivo4"> </p> <p class="muted-text svelte-h1ivo4"> </p></div></div> <div class="info-card svelte-h1ivo4"><h2 class="svelte-h1ivo4">Productos</h2> <ul class="product-list svelte-h1ivo4"></ul></div> <div class="info-card svelte-h1ivo4"><h2 class="svelte-h1ivo4">Historial de Estados</h2> <ul class="log-list svelte-h1ivo4"></ul></div></div></div></div>');function sa(u,g){ds(g,!1);const f=()=>Es(js,"$page",x),[x,Ne]=Ds(),t=b();let ie=$s(g,"data",8),y=b(),j=b(""),w=b(!1),$=b(null),S=b(null);const k={created:"Creado",reserved:"Reservado",in_transit:"En Tránsito",delivered:"Entregado",cancelled:"Cancelado",in_distribution:"En Distribución",arrived:"Arribado"},Oe=["created","reserved","in_transit","delivered","cancelled","in_distribution","arrived"],re={created:"#f0e68c",reserved:"#ffa07a",in_transit:"#add8e6",delivered:"#98fb98",cancelled:"#f08080",in_distribution:"#dda0dd",arrived:"#8fbc8f"};function A(r){return r?new Date(r).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function ve(r,v=1){if(!/^#([A-Fa-f0-9]{3}){1,2}$/.test(r))return"rgba(0,0,0,0)";let l=r.substring(1).split("");return l.length===3&&(l=[l[0],l[0],l[1],l[1],l[2],l[2]]),l="0x"+l.join(""),`rgba(${[l>>16&255,l>>8&255,l&255].join(",")},${v})`}async function Pe(){p(w,!0),p($,null),p(S,null);try{const r=f().params.id;if(!r)throw new Error("ID de envío no válido.");await ns(r,e(y),e(j)),p(S,"Estado actualizado con éxito."),window.location.reload()}catch(r){r instanceof Error?p($,r.message):p($,"Ocurrió un error inesperado al actualizar el estado.")}finally{p(w,!1)}}Ce(()=>us(ie()),()=>{p(t,ie().shipmentDetails)}),Ce(()=>e(t),()=>{e(t)&&p(y,e(t).status)}),cs(),ys();var z=Os(),C=a(z),le=a(C),oe=i(a(le)),Fe=a(oe);s(oe),s(le),Te(2),s(C);var ne=i(C,2),T=a(ne),M=a(T),de=i(a(M),2),N=a(de),O=i(a(N),2),Re=a(O,!0);s(O),s(N);var P=i(N,2),qe=i(a(P),2);Ss(qe,{get name(){return e(t),o(()=>e(t).transport_type)},className:"transport-icon"}),s(P);var F=i(P,2),ce=i(a(F),2),Le=a(ce,!0);s(ce),s(F);var R=i(F,2),pe=i(a(R),2),Ue=a(pe,!0);s(pe),s(R);var q=i(R,2),ue=i(a(q),2),Be=a(ue);s(ue),s(q);var _e=i(q,2),he=i(a(_e),2),Ge=a(he,!0);s(he),s(_e),s(de),s(M);var L=i(M,2),me=i(a(L),2),U=a(me),fe=i(a(U),2),He=a(fe,!0);s(fe),s(U);var B=i(U,2),be=i(a(B),2),Je=a(be,!0);s(be),s(B);var ge=i(B,2),xe=i(a(ge),2),Ke=a(xe,!0);s(xe),s(ge),s(me),s(L);var ye=i(L,2),G=i(a(ye),2),H=a(G),J=i(a(H),2);h(()=>{e(y),_s(()=>{})}),se(J,5,()=>Oe,ae,(r,v)=>{var l=ks(),d=a(l,!0);s(l);var c={};h(()=>{n(d,(e(v),o(()=>k[e(v)]))),c!==(c=e(v))&&(l.value=(l.__value=e(v))??"")}),_(r,l)}),s(J),s(H);var K=i(H,2),$e=i(a(K),2);fs($e),s(K);var I=i(K,2),Qe=a(I);{var We=r=>{var v=zs();Te(),_(r,v)},Xe=r=>{var v=ms("Actualizar");_(r,v)};ee(Qe,r=>{e(w)?r(We):r(Xe,!1)})}s(I);var De=i(I,2);{var Ye=r=>{var v=Cs(),l=a(v,!0);s(v),h(()=>n(l,e($))),_(r,v)};ee(De,r=>{e($)&&r(Ye)})}var Ze=i(De,2);{var Ve=r=>{var v=Ts(),l=a(v,!0);s(v),h(()=>n(l,e(S))),_(r,v)};ee(Ze,r=>{e(S)&&r(Ve)})}s(G),s(ye),s(T);var Ee=i(T,2),Q=a(Ee),W=i(a(Q),2),X=i(a(W),2),es=a(X);s(X);var we=i(X,2),ss=a(we,!0);s(we),s(W);var Se=i(W,2),Y=i(a(Se),2),as=a(Y);s(Y);var Ae=i(Y,2),ts=a(Ae,!0);s(Ae),s(Se),s(Q);var Z=i(Q,2),Ie=i(a(Z),2);se(Ie,5,()=>(e(t),o(()=>e(t).products)),ae,(r,v)=>{var l=Ms(),d=a(l),c=i(a(d)),V=a(c,!0);s(c),s(d);var D=i(d,2),E=a(D);s(D),s(l),h(()=>{n(V,(e(v),o(()=>e(v).product_id))),n(E,`Cantidad: ${e(v),o(()=>e(v).quantity)??""}`)}),_(r,l)}),s(Ie),s(Z);var je=i(Z,2),ke=i(a(je),2);se(ke,5,()=>(e(t),o(()=>e(t).logs.sort((r,v)=>new Date(v.timestamp).getTime()-new Date(r.timestamp).getTime()))),ae,(r,v)=>{var l=Ns(),d=a(l),c=a(d),V=a(c,!0);s(c),s(d);var D=i(d,2),E=a(D),is=a(E,!0);s(E);var ze=i(E,2),rs=a(ze,!0);s(ze),s(D),s(l),h((vs,ls)=>{Me(c,`background-color: ${vs??""};`),n(V,(e(v),o(()=>k[e(v).status]||e(v).status))),n(is,(e(v),o(()=>e(v).message||"Sin mensaje."))),n(rs,ls)},[()=>(e(v),o(()=>ve(re[e(v).status]||"#ccc",.7))),()=>(e(v),o(()=>A(e(v).timestamp)))]),_(r,l)}),s(ke),s(je),s(Ee),s(ne),s(z),h((r,v,l,d,c)=>{n(Fe,`#${e(t),o(()=>e(t).shipping_id)??""}`),Me(O,`background-color: ${r??""};`),n(Re,(e(t),o(()=>k[e(t).status]||e(t).status))),n(Le,(e(t),o(()=>e(t).user_id))),n(Ue,(e(t),o(()=>e(t).carrier_name))),n(Be,`${e(t),o(()=>e(t).currency)??""} ${v??""}`),n(Ge,(e(t),o(()=>e(t).tracking_number))),n(He,l),n(Je,d),n(Ke,c),I.disabled=e(w),n(es,`${e(t),o(()=>e(t).departure_address.street)??""} ${e(t),o(()=>e(t).departure_address.number)??""}`),n(ss,(e(t),o(()=>e(t).departure_address.locality_name))),n(as,`${e(t),o(()=>e(t).delivery_address.street)??""} ${e(t),o(()=>e(t).delivery_address.number)??""}`),n(ts,(e(t),o(()=>e(t).delivery_address.locality_name)))},[()=>(e(t),o(()=>ve(re[e(t).status]||"#ccc",.7))),()=>(e(t),o(()=>e(t).total_cost.toFixed(2))),()=>(e(t),o(()=>A(e(t).created_at))),()=>(e(t),o(()=>A(e(t).updated_at))),()=>(e(t),o(()=>A(e(t).estimated_delivery_at)))]),gs(J,()=>e(y),r=>p(y,r)),bs($e,()=>e(j),r=>p(j,r)),hs("submit",G,xs(Pe)),_(u,z),ps(),Ne()}export{sa as component,ea as universal};
